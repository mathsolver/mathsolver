<?php

use MathSolver\Fractions\ParseFractions;
use MathSolver\Runner;
use MathSolver\Utilities\StringToTreeConverter;

it('can do arithmetic', function (string $input, string $expected) {
    $tree = StringToTreeConverter::run($input);
    $result = Runner::run($tree)['result'];
    $expected = ParseFractions::run(StringToTreeConverter::run($expected));
    expect($result)->toEqual($expected);
})->with([
    // Add and Subtract
    ['53 + 8', '61'],
    ['173 + 6', '179'],
    ['800 + 30', '830'],
    ['12 - 9', '3'],
    ['83 - 7', '76'],
    ['500 - 17', '483'],
    ['64 + 89 + 36', '189'],
    ['17 + 58 + 183', '258'],
    ['600 + 800', '1400'],
    ['539 - 98', '441'],
    ['5616 - 199', '5417'],
    ['68 + 49', '117'],
    ['8210 - 1993', '6217'],
    ['127 + 77 + 423', '627'],
    ['83 - 17', '66'],
    ['329 - 85 + 471', '715'],
    ['893 - 87 + 107', '913'],
    ['199 + 93', '292'],
    ['5 + 7', '12'],
    ['500 + 700', '1200'],
    ['5000 + 70', '5070'],
    ['23 - 7', '16'],
    ['2300 - 700', '1600'],
    ['2300 - 70', '2230'],
    ['2300 + 700', '3000'],
    ['7500 - 3200', '4300'],
    ['8000 - 111', '7889'],
    ['4327 + 4673', '9000'],
    ['732 + 196', '928'],
    ['996 - 399', '597'],
    ['632 - 185 + 268', '715'],
    ['5036 - 97 + 18', '4957'],
    ['693 + 307 + 8000', '9000'],
    ['9063 - 387 - 90', '8586'],
    ['1700 - 800 - 109', '791'],
    ['542 + 193 + 507', '1242'],
    ['-4 + 6', '2'],
    ['-9 + 5', '-4'],
    ['-6 - 4', '-10'],
    ['-5 - 9', '-14'],
    ['0 + 17', '17'],
    ['-3 + 3', '0'],
    ['-15 - 25', '-40'],
    ['-8 - 26', '-34'],
    ['6 - 8', '-2'],
    ['-1 + 3', '2'],
    ['-4 - 9', '-13'],
    ['-2 + 10', '8'],
    ['27 - 31', '-4'],
    ['-8 - 21', '-29'],
    ['12 - 10', '2'],
    ['-6 + 33', '27'],
    ['-76 - 29', '-105'],
    ['57 - 62', '-5'],
    ['-13 + 23', '10'],
    ['-59 + 83', '24'],
    ['-213 - 76', '-289'],
    ['-131 + 67', '-64'],
    ['456 - 456', '0'],
    ['-765 - 0', '-765'],
    ['-5 - (13 - 7)', '-11'],
    ['-12 - 8 - 1', '-21'],
    ['-12 - (8 - 1)', '-19'],
    ['35 - (12 + 43)', '-20'],
    ['5 - 8 - (12 - 7)', '-8'],
    ['13 - 48 - (11 + 27)', '-73'],
    ['-20 + -42', '-62'],
    ['-14 - 23', '-37'],
    ['8 + -3 + -11', '-6'],
    ['13 - 24 + -35', '-46'],
    ['23 - (63 + -27)', '-13'],
    ['-2 + (42 + -69)', '-29'],
    ['5 + -1', '4'],
    ['10 + -5', '5'],
    ['-9 + -1', '-10'],
    ['-5 + -6', '-11'],
    ['-6 + -20', '-26'],
    ['0 + -8', '-8'],
    ['13 + -21', '-8'],
    ['19 + -19', '0'],
    ['-21 + -21', '-42'],
    ['-8 + -3', '-11'],
    ['-8 + 3', '-5'],
    ['8 + -3', '5'],
    ['-8 - 3', '-11'],
    ['8 - 3', '5'],
    ['-3 - 8', '-11'],
    ['3 + -8', '-5'],
    ['-3 + -8', '-11'],
    ['-3 + 8', '5'],
    ['-11 - (14 + -9)', '-16'],
    ['-75 + -18 + -23', '-116'],
    ['101 - (39 + -12)', '74'],

    // Multiply and Divide
    ['7 * 4', '28'],
    ['3 * 8', '24'],
    ['5 * 3', '15'],
    ['8 * 4', '32'],
    ['80 * 40', '3200'],
    ['800 * 40', '32000'],
    ['9 * 4', '36'],
    ['700 * 30', '21000'],
    ['400 * 9000', '3600000'],
    ['56 / 8', '7'],
    ['28 / 7', '4'],
    ['24 / 3', '8'],
    ['640 / 8', '80'],
    ['1800 / 600', '3'],
    ['3600 / 60', '60'],
    ['1800 / 90', '20'],
    ['54000 / 60', '900'],
    ['6900 / 3', '2300'],
    ['14 * 45', '630'],
    ['18 * 55', '990'],
    ['24 * 25', '600'],
    ['4 * 38', '152'],
    ['96 / 16', '6'],
    ['288 / 36', '8'],
    ['192 / 24', '8'],
    ['10800 / 12', '900'],
    ['805 / 23', '35'],
    ['7 * -30', '-210'],
    ['8 * -5', '-40'],
    ['-6 * 30', '-180'],
    ['-1 * 12 * 3', '-36'],
    ['18 * -1 * 2', '-36'],
    ['0 * -300 * 57', '0'],
    ['25 * -8 * 4 * 1', '-800'],
    ['-1 * 1 * 4 * 0 * 3', '0'],
    ['-7 * 4 * 2 * 5', '-280'],
    ['-8 * -3', '24'],
    ['-9 * 0', '0'],
    ['12 * -70', '-840'],
    ['-12 * 5 * -1', '60'],
    ['-99 * 10  * -10', '9900'],
    ['18 * -5 * 10', '-900'],
    ['-5 * -4 * 3 * -2', '-120'],
    ['-2 * 6 * 3 * -5', '180'],
    ['-3 * 3 * -5 * -5', '-225'],
    ['2 * 7 * -5', '-70'],
    ['2 * -7 * -5', '70'],
    ['-2 * -7 * -5', '-70'],
    ['-5 * -4 * 3', '60'],
    ['-5 * 4 * 3', '-60'],
    ['-5 * -4 * -3', '-60'],
    ['-16 * -17 * 0 * 8', '0'],
    ['-1 * -1 * -1 * -1 * 1', '1'],
    ['-18 * 0 * 312 * 17', '0'],
    ['-48 / 12', '-4'],
    ['27 / -3', '-9'],
    ['52 / -52', '-1'],
    ['-42 / -3', '14'],
    ['-50 / 1', '-50'],
    ['17 / -1', '-17'],
    ['10 / -10', '-1'],
    ['0 / -10', '0'],
    ['-3 / -1', '3'],
    ['-17 / -17', '1'],
    [' (7 + 8) / -5 - 8', '-11'],
    ['18 / -6 - 5 / -1', '2'],
    ['-24 / -6 - 12 / (-4 + 2)', '10'],
    ['(-8 - 2) / -10 - 20 * -0.5', '11'],
    ['18 * -3 / 6 - 8', '-17'],
    ['-2 * 3 / -6 - 1 * -2', '3'],
    ['(25 - 50) / 5 * -10 - 8', '42'],
    ['((8 - 10) / -2 + 5) / -3', '-2'],
    ['(-8 * 5) / (-6 + -4)', '4'],
    ['(-12 * -5) - (-20 / 2)', '70'],
    ['8 / (2 * -4) - 12 / 2', '-7'],
    ['8 - ((10 - 10) / 4 + 5 * -2)', '18'],

    // Order of Operations
    ['9 + 6 * 5', '39'],
    ['(9 + 3) * 7 - 80', '4'],
    ['20 - 2 * 8 - 4', '0'],
    ['8 + 3 * (7 + 2)', '35'],
    ['(8 + 3) * (8 / 2)', '44'],
    ['20 + 64 / (8 / 4)', '52'],
    ['20 - 64 / 8 / 4', '18'],
    ['6 - 3 * (16 / (2 + 6))', '0'],
    ['128 / 4 - (25 - 17) * 4 + 48 / 12 - 4', '0'],
    ['(9 * 6 - 18 - 8 * 3) / 6 + 5 * 3', '17'],
    ['800 - (300 - (200 - 150) * 2) - 450', '150'],
    ['1800 / (600 - (2 * 250 - 200))', '6'],
    ['45 - 3 * (8 - 4 * (5 - 2 * (3 - 1)))', '33'],
    ['8000 + 20 * 30 * (50 - 6 * (45 - 40))', '20000'],
    ['120 / 2 * (3 + (2 * 12 - 23))', '240'],
    ['(((28 / 7 + 2) * 2 + 5) - 3) * 5', '70'],
    ['9 - 5 * -3', '24'],
    ['-3 - 0 * -5 + 6', '3'],
    ['-2 - (5 - 5) * -6', '-2'],
    ['8 - (3 - 5) * -4', '0'],
    ['(8 - 3) * -5 - 4', '-29'],
    ['(-1 - 6) * -1 - 4 * -2', '15'],
    ['11 * -3 - 8 * -4', '-1'],
    ['-2 - 3 * (4 - 5) - 6', '-5'],
    ['-7 - (2 - 5) * -4 + 9', '-10'],
    ['-3 - (3 - 3) * 3 - 3', '-6'],
    ['-3 * -3 * -3 - 3', '-30'],
    ['-3 * -3 - 3 * -3 - 3 * -3', '27'],

    // Fractions
    ['15/25', '3/5'],
    ['15/27', '5/9'],
    ['18/36', '1/2'],
    ['28/35', '4/5'],
    ['20/100', '1/5'],
    ['56/40', '7/5'],
    ['35/90', '7/18'],
    ['60/12', '5'],
    ['32/32', '1'],
    ['-18/9', '-2'],
    ['-21/-1', '21'],
    ['-81/-9', '9'],
    ['0/-3', '0'],
    ['-21/21', '-1'],
    ['27/-9', '-3'],
    ['1/2 + 1/3', '5/6'],
    ['1/2 + 1/4', '3/4'],
    ['3/4 - 1/3', '5/12'],
    ['3/2 - 1/4', '5/4'],
    ['7/8 - 8/64', '3/4'],
    ['3/5 + 2/3 + 1/6', '43/30'],
    ['11/5 - 3/4 + 7/10', '43/20'],
    ['43/8 - (5/4 + 5/2)', '13/8'],
    ['28 - (3 + 14/3)', '61/3'],
    ['5/8 * 3/7', '15/56'],
    ['2/9 * 7/5', '14/45'],
    ['3 * 2/9', '2/3'],
    ['5/4 * 7/5', '7/4'],
    ['1/5 * 15', '3'],
    ['3/4 * 80', '60'],
    ['3/8 * 2/7', '3/28'],
    ['3/8 + 2/7', '37/56'],
    ['7/4 * 2/5', '7/10'],
    ['7/4 + 2/5', '43/20'],
    ['9/4 * 8/3', '6'],
    ['9/4 + 8/3', '59/12'],
    ['5/3 + 3/4 * 3/5', '127/60'],
    ['8/3 + 3/2 * 5/9', '7/2'],
    ['(9/4 - 1/3) * 12/23', '1'],
    ['5 - 3/8 * 4/3', '9/2'],
    ['4 * 1/3 * 3/4', '1'],
    ['11/6 * 6000', '11000'],
    ['120 * (1 - (1/3 + 1/4 + 1/6))', '30'],
    ['(-4 * (5 - -10)) / (-4 + 1)', '20'],
    ['5 * (6 + 18 / -3) / (-5 * -1) - 12 / (3 * -4)', '1'],
    ['(-18 - 6) / (-4 * 3)', '2'],
    ['(-18 - 12) / 2 * -5', '75'],
    ['15 / -3 - 8 * -2 + 3', '14'],
    ['(-21 - -12) / (10 - 1) + 9/-9', '-2'],
    ['15/-15 + -21/-3 - 7 * -1', '13'],
    ['5 * (8 - 29) / -7 - (24 / (18 / -3) - 8) * 3', '51'],
]);
